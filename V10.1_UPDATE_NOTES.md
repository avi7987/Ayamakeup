# 📋 עדכון V10.1 - חוזה משופר עם טבלה וחישובים אוטומטיים

## 🎯 מה השתנה?

### 1. טבלה מקצועית לפירוט שירותים
החוזה כעת כולל סעיף **"פירוט השירותים והעלויות"** עם טבלה מסודרת:

| תיאור השירות | פרטים | מחיר (₪) |
|--------------|--------|----------|
| שירות עיקרי | פרטי השירות | מחיר |
| ליווי | נוכחות באירוע | מחיר (אם נבחר) |
| מלוות | כמות מלוות | מחיר (אם נבחרו) |

**יתרונות:**
- הצגה ברורה של כל שירות ומחירו
- נראה מקצועי ומשפטי
- קל לקריאה והבנה

### 2. חישוב אוטומטי של יתרה
משתנה חדש: **{{balance}}**

המערכת מחשבת אוטומטית:
```
יתרה = מחיר כולל - מקדמה
```

### 3. סיכום כספי משופר
מתחת לטבלה מופיע סיכום ברור בקופסה מסומנת:

```
┌─────────────────────────────────────────┐
│ סה"כ עלות השירותים:      X,XXX ₪     │
│ מקדמה ששולמה:            X,XXX ₪     │
│ יתרה לתשלום ביום האירוע: X,XXX ₪     │
└─────────────────────────────────────────┘
```

### 4. עיצוב מקצועי
- כותרות סעיפים מודגשות
- טבלה עם מסגרות ורקע
- פורמט מספרים עברי (1,000 במקום 1000)
- מרווחים מותאמים
- עיצוב RTL מלא

## 📝 משתנה חדש

**{{balance}}** - יתרה לתשלום (מחושב אוטומטית)

רשימת משתנים מלאה:
- {{firstName}}, {{lastName}}, {{fullName}}
- {{phone}}, {{service}}, {{eventDate}}, {{location}}
- {{price}}, {{deposit}}, **{{balance}}** ⭐ חדש!
- {{hasEscort}}, {{escortPrice}}
- {{hasBridesmaids}}, {{bridesmaidsCount}}, {{bridesmaidsPrice}}
- {{date}}

## 🎨 שינויים בעיצוב

### לפני (V10.0):
```
מחיר כולל: 5,000 ₪
מקדמה: 2,000 ₪

ליווי: כן
מחיר ליווי: 800 ₪
```

### אחרי (V10.1):
```
פירוט השירותים והעלויות

┌───────────────────┬──────────────────┬───────────┐
│ תיאור השירות     │ פרטים           │ מחיר (₪) │
├───────────────────┼──────────────────┼───────────┤
│ איפור כלה        │ שירות עיקרי     │ 5,000     │
│ ליווי לאירוע     │ נוכחות באירוע   │ 800       │
└───────────────────┴──────────────────┴───────────┘

סיכום כספי:
סה"כ עלות השירותים: 5,000 ₪
מקדמה ששולמה: 2,000 ₪
יתרה לתשלום ביום האירוע: 3,000 ₪
```

## 🔄 מה נשאר אותו דבר?

1. ✅ הממשק להעלאת תבניות
2. ✅ תצוגה מקדימה לפני שליחה
3. ✅ אינטגרציה עם WhatsApp
4. ✅ כל המשתנים הקודמים
5. ✅ שדות נוספים (שם משפחה, ליווי, מלוות)

## 📚 קבצים שעודכנו

1. **server-cloud.js**
   - חישוב balance אוטומטי
   - HTML מעודכן עם טבלה
   - פורמט מספרים עברי

2. **app_db.js**
   - רשימת משתנים מעודכנת בטולטיפ

3. **CONTRACT_TEMPLATE_EXAMPLE.txt**
   - דוגמה עם {{balance}}

4. **CONTRACT_QUICKSTART.md**
   - רשימת משתנים מעודכנת

5. **CONTRACT_SYSTEM_GUIDE.md**
   - הסבר על {{balance}}
   - דוגמה מעודכנת

6. **public/index.html**
   - גרסה V10.1
   - Cache-busting מעודכן

## ✨ דוגמה מלאה לשימוש בתבנית Word

```
חוזה מתן שירותים

תאריך: {{date}}

פרטי הלקוח/ה:
שם מלא: {{fullName}}
טלפון: {{phone}}

פרטי האירוע:
סוג השירות: {{service}}
תאריך: {{eventDate}}
מיקום: {{location}}

פירוט השירותים:
(כאן תוכלי להשתמש בטבלה ב-Word או לכתוב בפשטות)

תנאים כספיים:
סך כל התשלום: {{price}} ₪
מקדמה ששולמה: {{deposit}} ₪
יתרה לתשלום ביום האירוע: {{balance}} ₪

שירותים נוספים שנבחרו:
- ליווי לאירוע: {{hasEscort}} ({{escortPrice}} ₪)
- מלוות: {{hasBridesmaids}} - כמות: {{bridesmaidsCount}} ({{bridesmaidsPrice}} ₪)

חתימות:
_______________          _______________
הלקוח/ה                  נותן השירות
```

## 🚀 איך להשתמש?

**אם יש לך תבנית קיימת:**
1. פתחי את קובץ ה-Word
2. הוסיפי {{balance}} במקום שכתבת את היתרה
3. העלי מחדש את התבנית
4. זהו! 🎉

**אם אין לך תבנית:**
1. צרי חוזה חדש ב-Word
2. השתמשי בדוגמה למעלה
3. העלי למערכת
4. בדקי תצוגה מקדימה

## 💡 טיפים

1. **{{balance}}** מחושב אוטומטית - לא צריך לעשות כלום
2. ה-PDF שנוצר יכלול טבלה מעוצבת אוטומטית
3. המספרים מופיעים בפורמט עברי (עם פסיקים)
4. השירותים הנוספים מופיעים רק אם נבחרו

## 🎯 למה זה טוב יותר?

### עבור הלקוחה:
- ✅ קל יותר להבין את החישוב
- ✅ רואה בדיוק כמה צריך לשלם
- ✅ נראה יותר מקצועי

### עבורך:
- ✅ פחות שגיאות חישוב
- ✅ נראה יותר משפטי
- ✅ חוסך זמן
- ✅ מראה מקצועיות

---

**גרסה:** V10.1  
**תאריך:** 27.12.2025  
**קוד עודכן:** ✅  
**נבדק:** מוכן לשימוש  
**הוראות התקנה:** פשוט push ל-Railway - יעדכן אוטומטית!
