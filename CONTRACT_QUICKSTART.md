# 📋 מערכת יצירת חוזים - הנחיות התחלה מהירה

## 🎯 מה התווסף?
מערכת מלאה ליצירה אוטומטית של חוזים מתבניות Word, המרה ל-PDF, ושליחה דרך WhatsApp.

## 🚀 התחלה מהירה

### שלב 1: יצירת תבנית חוזה
1. צור קובץ Word עם תבנית החוזה שלך
2. השתמש במשתנים כמו: `{{firstName}}`, `{{lastName}}`, `{{phone}}`, `{{service}}`, `{{price}}` וכו'
3. שמור בשם contract-template.docx

### שלב 2: העלאת התבנית
1. פתח את המערכת והיכנס ל-"הגדרות הודעות" (⚙️ הגדרות WhatsApp)
2. גלול לשלב "נשלח חוזה" (📄)
3. העלה את קובץ ה-Word בסקציה "תבנית חוזה (Word)"

### שלב 3: שימוש
1. כשליד מגיע לשלב "נשלח חוזה" - גרור אותו לעמודה
2. מלא שדות נוספים (שם משפחה, פרטי ליווי, מלוות)
3. לחץ "תצוגה מקדימה" כדי לראות את החוזה לפני שליחה
4. לחץ "שלח עכשיו" - החוזה נוצר ונשלח דרך WhatsApp עם קישור להורדה

## 📝 משתנים זמינים בתבנית
```
{{firstName}}          - שם פרטי
{{lastName}}           - שם משפחה
{{fullName}}           - שם מלא
{{phone}}              - טלפון
{{service}}            - שירות
{{eventDate}}          - תאריך אירוע
{{location}}           - מיקום
{{price}}              - מחיר
{{deposit}}            - מקדמה
{{balance}}            - יתרה לתשלום (מחושב אוטומטית)
{{hasEscort}}          - יש ליווי? (כן/לא)
{{escortPrice}}        - מחיר ליווי
{{hasBridesmaids}}     - יש מלוות? (כן/לא)
{{bridesmaidsCount}}   - כמות מלוות
{{bridesmaidsPrice}}   - מחיר מלוות
{{date}}               - תאריך יצירה
```

## 📚 מדריך מפורט
ראה [CONTRACT_SYSTEM_GUIDE.md](./CONTRACT_SYSTEM_GUIDE.md) למדריך מלא עם דוגמאות.

## 🛠️ שינויים טכניים
- **שדות חדשים בליד:** lastName, hasEscort, escortPrice, hasBridesmaids, bridesmaidsCount, bridesmaidsPrice
- **חבילות חדשות:** docxtemplater, pizzip, multer, puppeteer
- **אנדפוינטים חדשים:** 
  - POST /api/contract-template - העלאת תבנית
  - POST /api/generate-contract/:leadId - יצירת חוזה
  - GET /api/contract-template/status - סטטוס תבנית

## 💡 טיפים
- **תמיד תבדוק תצוגה מקדימה** בפעם הראשונה שאת משתמשת בתבנית
- **עדכני מחירים** לפני שליחה
- **שמרי גיבוי** של תבנית החוזה במחשב
- התבנית נשמרת בשרת ולא צריך להעלות אותה שוב

## 🔧 פתרון בעיות

### "תבנית חוזה לא נמצאה"
→ העלי את תבנית ה-Word דרך הגדרות ההודעות

### החוזה לא נראה נכון
→ בדקי שכל המשתנים כתובים עם סוגריים מסולסלים כפולים {{כך}}

### הדפדפן לא פותח WhatsApp
→ בדקי שיש לך WhatsApp Web מחובר או WhatsApp Desktop מותקן

## 📞 צריכה עזרה?
פתחי את ה-Console בדפדפן (F12) ותחפשי הודעות שגיאה.
